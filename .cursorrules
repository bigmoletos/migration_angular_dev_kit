# Cursor Rules - Migration Angular 5 â†’ 20

## Project Context
Migration progressive d'Angular 5.2.0 vers Angular 20
- BibliothÃ¨que : `pwc-ui-shared-v4-ia`
- Application : `pwc-ui-v4-ia`
- Workspace : `C:\repo_hps\`

## Critical Constraints

### ğŸš« NO Admin Rights
- Avoid global npm installs
- No system-level commands (sudo, chown, chmod)
- Find alternatives for privileged operations

### ğŸ“ Keep Official Repos Clean
- Never create test/debug files in `pwc-ui-shared-v4-ia/` or `pwc-ui-v4-ia/`
- Use `scripts_outils_ia/` for temporary scripts
- Delete temporary files after use

### ğŸ“ Mandatory Documentation
Update `docs_outils_ia/JOURNAL-COORDINATION.md` daily for significant changes:
```markdown
## [DATE] - [ACTION TITLE]
**Repos concernÃ©s**: pwc-ui-shared-v4-ia / pwc-ui-v4-ia
**Action effectuÃ©e**: [description]
**RÃ©sultat**: [success/failure]
**ProblÃ¨mes rencontrÃ©s**: [issues â†’ solutions]
**Prochaine Ã©tape**: [next action]
**Temps passÃ©**: X heures
```

## Development Methodology

### Test-Driven Development (TDD)
1. Write failing test first (Red)
2. Implement minimal code to pass (Green)
3. Refactor while keeping tests green

### Code Quality Standards
- SOLID principles
- DRY (Don't Repeat Yourself)
- KISS (Keep It Simple)
- Meaningful variable/function names
- Handle edge cases and errors
- Atomic commits (one feature = one commit)

## Migration Strategy

### Order of Operations
1. Migrate `pwc-ui-shared-v4-ia` (library) FIRST
2. Then migrate `pwc-ui-v4-ia` (consumer app)

### Angular Upgrade Path
Phase 1: 5 â†’ 6 â†’ 7 â†’ 8 (Foundation)
Phase 2: 8 â†’ 9 â†’ 10 â†’ 11 â†’ 12 (Ivy)
Phase 3: 12 â†’ 13 â†’ 14 â†’ 15 (Standalone)
Phase 4: 15 â†’ 16 â†’ 17 (Signals)
Phase 5: 17 â†’ 18 â†’ 19 â†’ 20 (Zoneless)

### Per-Step Checklist
- [ ] Write tests before changes (TDD)
- [ ] Update dependencies in package.json
- [ ] Run tests (npm test)
- [ ] Build without errors (npm run build)
- [ ] Check security audit (npm audit)
- [ ] Update JOURNAL-COORDINATION.md
- [ ] Commit with descriptive message

## File Organization

```
C:\repo_hps\
â”œâ”€â”€ pwc-ui-shared-v4-ia/    # DO NOT pollute with test files
â”œâ”€â”€ pwc-ui-v4-ia/           # DO NOT pollute with test files
â”œâ”€â”€ scripts_outils_ia/      # Temporary scripts OK here
â”‚   â””â”€â”€ [cleanup after use]
â””â”€â”€ docs_outils_ia/         # Project documentation
    â”œâ”€â”€ JOURNAL-COORDINATION.md  # Daily updates required
    â””â”€â”€ ETAT-MIGRATION.md        # Migration progress tracking
```

## Code Style & Patterns

### TypeScript
- Prefer strict type checking
- Use interfaces over type aliases for object shapes
- Avoid `any` type (use `unknown` if needed)
- Use async/await over raw Promises

### Angular Specifics
- Use OnPush change detection strategy
- Unsubscribe from observables (use takeUntil pattern)
- Prefer reactive forms over template-driven
- Use standalone components when migrating to v14+
- Implement OnDestroy for cleanup

### RxJS
- Use pipeable operators (Angular 6+)
- Avoid nested subscriptions
- Prefer declarative approach over imperative
- Use shareReplay for HTTP calls

## Common Commands

### Safe to Use (No Admin)
```bash
npm install --save <package>     # Local install
npm test                         # Run tests
npm run build                    # Build project
npm outdated                     # Check outdated deps
npm audit                        # Security check
git add/commit/push              # Version control
```

### Use in scripts_outils_ia/ Only
```bash
node test-script.js
npm install <experimental-package>
echo "debug" > temp.log
```

## Before Each Change

- [ ] Is this change necessary for migration?
- [ ] Do I have tests covering this (TDD)?
- [ ] Will this pollute official repos? â†’ Use scripts_outils_ia/
- [ ] Does this need admin rights? â†’ Find alternative
- [ ] Will I update JOURNAL-COORDINATION.md after?

## Integration with Other AI Tools

Share context with .claude, .vibe, .gemini for consistency
Common goals: Clean migration, TDD, documentation, no admin issues

---
Version: 1.0.0 | Updated: 2026-02-03
