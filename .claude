# Configuration Claude - Migration Angular 5 â†’ 20

## Contexte du Projet

**Objectif** : Migration progressive d'applications Angular 5.2.0 vers Angular 20
**Repos concernÃ©s** :
- `pwc-ui-shared-v4-ia` : BibliothÃ¨que de composants partagÃ©s
- `pwc-ui-v4-ia` : Application principale (dÃ©pend de pwc-ui-shared)

**Technologies actuelles** :
- Angular 5.2.0
- RxJS 5.5.6
- TypeScript 2.6.2
- Zone.js 0.8.19

**Cible** : Angular 20 + derniÃ¨res versions compatibles

## Contraintes Importantes

### ğŸ”’ Limitations Environnement
- **PAS de droits administrateur** : Ã‰viter toute commande nÃ©cessitant des privilÃ¨ges Ã©levÃ©s
- **Workspace isolÃ©** : Tous les scripts/tests dans `C:\repo_hps\scripts_outils_ia`
- **Repos officiels propres** : Ne JAMAIS polluer pwc-ui* avec des fichiers de test/debug

### ğŸ“ Documentation Obligatoire
- **Journal de bord** : `docs_outils_ia/JOURNAL-COORDINATION.md`
  - Mise Ã  jour QUOTIDIENNE pour tout changement significatif
  - Format : EntrÃ©es chronologiques inversÃ©es (plus rÃ©cent en haut)
  - Inclure : Action, RÃ©sultat, ProblÃ¨mes, Prochaine Ã©tape, Temps passÃ©

- **Ã‰tat migration** : `docs_outils_ia/ETAT-MIGRATION.md`
  - Suivi de progression par palier (5â†’6â†’7...â†’20)
  - Dashboard des statuts (âœ… â³ âŒ ğŸ”´)

### ğŸ¯ MÃ©thodologie de DÃ©veloppement

#### Test-Driven Development (TDD)
1. **Red** : Ã‰crire le test qui Ã©choue
2. **Green** : ImplÃ©menter le minimum pour passer le test
3. **Refactor** : AmÃ©liorer le code en gardant les tests verts

#### Bonnes Pratiques
- **Code propre** : SOLID, DRY, KISS
- **Commits atomiques** : Une fonctionnalitÃ© = un commit
- **Revue systÃ©matique** : Relire avant de valider
- **Gestion d'erreurs** : Toujours anticiper les cas limites

### âš¡ Optimisation des Tokens

#### Mode Stateful
- Utiliser l'orchestrateur pour conserver le contexte entre interactions
- Ã‰viter de relire les mÃªmes fichiers plusieurs fois
- RÃ©sumer les informations importantes pour les rÃ©utiliser

#### EfficacitÃ©
- PrÃ©fÃ©rer les outils spÃ©cialisÃ©s (Task, Explore) aux commandes directes
- Grouper les lectures/recherches en parallÃ¨le
- Utiliser les skills prÃ©-configurÃ©s quand disponibles

#### Orchestration
```
Orchestrateur (stateful)
    â”œâ”€â”€ Skill: Exploration (analyse codebase)
    â”œâ”€â”€ Skill: Migration (upgrade Angular)
    â”œâ”€â”€ Skill: Testing (TDD, validation)
    â””â”€â”€ Skill: Documentation (journal, rapports)
```

## Structure du Workspace

```
C:\repo_hps\
â”œâ”€â”€ pwc-ui-shared-v4-ia/        # BibliothÃ¨que (NE PAS polluer)
â”œâ”€â”€ pwc-ui-v4-ia/               # Application (NE PAS polluer)
â”œâ”€â”€ scripts_outils_ia/          # Scripts temporaires/debug (OK pour tests)
â”œâ”€â”€ docs_outils_ia/             # Documentation projet
â”‚   â”œâ”€â”€ JOURNAL-COORDINATION.md # Journal de bord (MAJ quotidienne)
â”‚   â”œâ”€â”€ ETAT-MIGRATION.md       # Suivi progression
â”‚   â”œâ”€â”€ GUIDE-*.md              # Guides de rÃ©fÃ©rence
â”‚   â””â”€â”€ ANALYSE-*.md            # Analyses techniques
â””â”€â”€ .claude                     # Ce fichier
```

## StratÃ©gie de Migration

### Approche IncrÃ©mentale (5 phases)

**Phase 1** : Angular 5 â†’ 8 (Foundation)
- Paliers : 5.2.0 â†’ 6 â†’ 7 â†’ 8
- Focus : Mise Ã  jour des APIs de base, HttpClient

**Phase 2** : Angular 8 â†’ 12 (Ivy)
- Paliers : 8 â†’ 9 â†’ 10 â†’ 11 â†’ 12
- Focus : Migration vers Ivy, optimisations

**Phase 3** : Angular 12 â†’ 15 (Standalone)
- Paliers : 12 â†’ 13 â†’ 14 â†’ 15
- Focus : Composants standalone optionnels

**Phase 4** : Angular 15 â†’ 17 (Signals)
- Paliers : 15 â†’ 16 â†’ 17
- Focus : Introduction des Signals

**Phase 5** : Angular 17 â†’ 20 (Zoneless)
- Paliers : 17 â†’ 18 â†’ 19 â†’ 20
- Focus : Mode zoneless, derniÃ¨res optimisations

### Ordre de Migration
1. **D'abord pwc-ui-shared-v4-ia** (bibliothÃ¨que)
2. **Ensuite pwc-ui-v4-ia** (application consommatrice)

### Checklist par Palier
- [ ] Audit des dÃ©pendances obsolÃ¨tes
- [ ] Tests unitaires passent (TDD)
- [ ] Build sans erreur ni warning critique
- [ ] Audit de sÃ©curitÃ© (npm audit)
- [ ] Mise Ã  jour du journal de bord
- [ ] Validation manuelle des fonctionnalitÃ©s critiques
- [ ] Commit avec message descriptif

## Scripts Temporaires

**Emplacement** : `scripts_outils_ia/` (pas dans les repos officiels !)

### Cycle de vie
1. CrÃ©er dans `scripts_outils_ia/`
2. Utiliser pour tester/debugger
3. **Supprimer aprÃ¨s usage** (garder workspace propre)
4. Si rÃ©utilisable â†’ documenter dans `docs_outils_ia/`

### Exemples autorisÃ©s
```bash
# Audit dependencies
scripts_outils_ia/audit-deps.sh

# Test migration step
scripts_outils_ia/test-ng6-upgrade.js

# Backup before upgrade
scripts_outils_ia/backup-before-upgrade.sh
```

## Workflows Types

### 1. Analyse de DÃ©pendance
```
1. Explore â†’ Identifier packages obsolÃ¨tes
2. Read â†’ package.json des deux repos
3. Bash â†’ npm outdated (dans scripts_outils_ia)
4. Edit â†’ Documenter dans JOURNAL-COORDINATION.md
```

### 2. Migration d'un Palier
```
1. AskUserQuestion â†’ Confirmer palier cible
2. Bash â†’ Backup des package.json
3. Edit â†’ Modifier package.json (shared d'abord)
4. Bash â†’ npm install (dans scripts_outils_ia/temp)
5. Bash â†’ npm test (TDD)
6. Edit â†’ Corriger erreurs identifiÃ©es
7. Bash â†’ npm run build
8. TaskUpdate â†’ Marquer palier complÃ©tÃ©
9. Edit â†’ MAJ JOURNAL-COORDINATION.md + ETAT-MIGRATION.md
10. Bash â†’ git commit (si validÃ©)
```

### 3. RÃ©solution de ProblÃ¨me
```
1. Grep â†’ Chercher erreur/pattern
2. Read â†’ Lire fichiers concernÃ©s
3. Task (Explore) â†’ Comprendre contexte
4. Write/Edit â†’ ImplÃ©menter solution (TDD)
5. Bash â†’ Tester solution
6. Edit â†’ Documenter dans JOURNAL-COORDINATION.md
```

## Commandes Ã  Ã‰viter

### âŒ Interdits (droits admin requis)
```bash
npm install -g <package>    # Global install
sudo <command>              # PrivilÃ¨ges Ã©levÃ©s
chown / chmod               # Modification permissions systÃ¨me
```

### âš ï¸ Attention (risque pollution repos)
```bash
# Dans pwc-ui* directement
npm install <test-package>
echo "test" > debug.log
node test-script.js

# âœ… Ã€ la place, utiliser scripts_outils_ia/
```

## IntÃ©gration avec d'Autres Outils IA

### .cursorrules / .vibe / .gemini / etc.
Ces fichiers partagent les mÃªmes principes :
- Contexte projet (migration Angular)
- Contraintes environnement (pas admin)
- TDD et bonnes pratiques
- Documentation obligatoire
- Optimisation tokens

### Coordination Multi-Outils
- **Claude** : Orchestration, dÃ©cisions complexes, documentation
- **Cursor** : Ã‰dition code, refactoring, IDE
- **Copilot** : Suggestions inline, complÃ©tion
- **Autres** : TÃ¢ches spÃ©cialisÃ©es selon capacitÃ©s

## Checklist Avant Chaque Action

- [ ] Action nÃ©cessite-t-elle des droits admin ? â†’ Trouver alternative
- [ ] Script/test va dans scripts_outils_ia/ (pas dans repos) ?
- [ ] Journal de bord sera mis Ã  jour aprÃ¨s ?
- [ ] Tests Ã©crits AVANT implÃ©mentation (TDD) ?
- [ ] Optimisation tokens (Ã©viter lectures redondantes) ?
- [ ] Changement significatif â†’ MAJ ETAT-MIGRATION.md ?

## Contact & Support

**Documentation de rÃ©fÃ©rence** :
- `docs_outils_ia/GUIDE-CONTEXT-OPTIMIZER.md` : Optimisation contexte
- `docs_outils_ia/GUIDE-SKILLS-ACP-FINDTOOLS.md` : Utilisation skills
- `docs_outils_ia/ANALYSE-ARCHITECTURE-REPO.md` : Architecture repos

**En cas de blocage** :
1. Documenter dans JOURNAL-COORDINATION.md (section "Blocages Actuels")
2. Analyser avec Task (Explore) pour comprendre le contexte
3. Proposer solutions alternatives (pas de droits admin)
4. Demander validation utilisateur (AskUserQuestion)

---

**Version** : 1.0.0
**DerniÃ¨re mise Ã  jour** : 2026-02-03
**Mainteneur** : Migration Team
